# Input data
In this file:
- [Acquiring input data for the `greenlight.main` program](#acquiring-input-data-for-the-greenlightmain-program)
- [Acquiring input data for running scripts](#acquiring-input-data-for-running-scripts)
- [Input data length vs. simulation length](#input-data-length-vs-simulation-length)
- [Using EnergyPlus data for other models](#using-energyplus-data-for-other-models)
- [Other data sources](#other-data-sources)
- [Examples](#examples)


For general information on formatting input data for the GreenLight platform, see [model format](model_format.md)
and in particular the subsection [input CSV files](model_format.md#input-csv-files) there.

## Acquiring input data for the `greenlight.main` program
The main program `greenlight.main` expects **weather data acquired from EnergyPlus and saved in CSV format**.
These files can be acquired in the following way:

1. Go to the [EnergyPlus weather database](https://energyplus.net/weather) and find a weather file, download it in EPW format
2. Go to [EnergyPlus downloads](https://energyplus.net/downloads) to download and install EnergyPlus
3. Use EnergyPlus' "Weather statistics and Conversions" tool to convert the EPW files to CSV
4. Place the converted CSV files in [models/katzin_2021/input_data/energyPlus_original](../models/katzin_2021/input_data/energyPlus_original)

Now when you run `python -m greenlight.main`, the button under **Input data file** will open automatically at
[energyPlus_original](../models/katzin_2021/input_data/energyPlus_original), and the new files can be chosen from there.

## Acquiring input data for running scripts
The main program `greenlight.main` takes the EnergyPlus CSV files and then, based on the input start date
and end date of the simulation, creates a formatted weather file that can be used by the `katzin_2021` model.

When running scripts that are not `greenlight.main`, you must first create a formatted weather file. First, follow steps 1-4, as above. Next:
5. Use the function [greenlight.convert_energy_plus()](../greenlight/energy_plus.py) to convert the EnergyPlus CSV data to formatted CSV data.
<br>Example:
```python
import datetime as dt
import greenlight
greenlight.convert_energy_plus(
    "models/katzin_2021/input_data/energyPlus_original/NLD_Amsterdam.062400_IWECEPW.csv",
    "models/katzin_2021/input_data/energyPlus_formatted/weather_ams_katzin_2021.csv",
    t_out_start=dt.datetime(year=2020, month=9, day=27),
    t_out_end=dt.datetime(year=2020, month=9, day=27)+dt.timedelta(days=350))
```

7. Place the formatted CSV file (if it's not already there) in [energyPlus_formatted](../models/katzin_2021/input_data/energyPlus_formatted).
This is where, for example, [scripts/greenlight_example.py](../scripts/greenlight_example.py) expects it.

## Input data length vs. simulation length
Note: the length of the input simulation data (the difference between `t_out_end` and `t_out_start`)
**does not influence the length of the simulated season**. The length of the simulated season is determined by the [simulation options](simulation_options.md),
namely the difference between `options["t_end"]` and `options["t_start"]`.

## Using EnergyPlus data for other models
The various models described in GreenLight have different requirements for the input data.
See [greenlight.convert_energy_plus()](../greenlight/energy_plus.py) for explanations on how EnergyPlus data can be converted to various formats.

## Other data sources
Weather data can of course be acquired from other sources, besides EnergyPlus.
All that's needed is that the data is formatted in the same manner as the files generated by [greenlight.convert_energy_plus()](../greenlight/energy_plus.py).

More generally, any model [defined in the GreenLight format](model_format.md) can explicitly define input variables.
Input files then need to include data for these input variables, following the information provided in the model description.

## Examples
The following examples may be useful:
- [`scripts/greenlight_examply.py`](../scripts/greenlight_example.py) Simple example of a GreenLight simulation
- [`scripts/katzin_2020/katzin_2020_format_input_data.py`](../scripts/katzin_2020/katzin_2020_format_input_data.py) Format input data for the simulations from [Katzin (2020)](https://doi.org/10.1016/j.biosystemseng.2020.03.010)
- [`scripts/katzin_2021/katzin_2021_format_input_data.py`](../scripts/katzin_2021/katzin_2021_format_input_data.py) Format input data for the simulations from [Katzin (2021a)](https://doi.org/10.1016/j.apenergy.2020.116019)

